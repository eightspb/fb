# Настройка SMTP для отправки писем

## Проблема: страницы не открываются

Если страницы не открываются после настройки SMTP, проверьте следующее:

## 1. Проверьте файл с переменными окружения

Убедитесь, что файл `.env.local` или `.env` существует в корне проекта и содержит:

```env
SMTP_HOST=smtp.mail.ru
SMTP_PORT=465
SMTP_USER=info@zenitmed.ru
SMTP_PASSWORD=MnDG5esS7nqwxGkmBVey
SMTP_FROM=info@zenitmed.ru
TARGET_EMAIL=info@zenitmed.ru
```

## 2. Перезапустите сервер разработки

После изменения `.env.local` или `.env` **обязательно перезапустите сервер**:

```powershell
# Остановите сервер (Ctrl+C)
# Затем запустите снова:
bun run dev
```

## 3. Проверьте переменные окружения

Запустите скрипт проверки:

```powershell
.\check-env.ps1
```

Или проверьте вручную, что переменные загружены:

```powershell
# Откройте в браузере после запуска сервера:
http://localhost:3000/api/test-smtp
```

## 4. Проверьте логи сервера

При запуске `bun run dev` проверьте консоль на наличие ошибок:
- Если видите `SMTP_USER не установлен` - переменные не загружены
- Если видите другие ошибки - скопируйте их для диагностики

## 5. Важно для PowerShell

**НЕ устанавливайте переменные окружения напрямую в PowerShell** так:
```powershell
# НЕПРАВИЛЬНО:
SMTP_FROM=info@zenitmed.ru
```

Вместо этого **редактируйте файл `.env.local`** напрямую в редакторе кода.

## 6. Если страницы все еще не открываются

1. Проверьте, запущен ли сервер: `bun run dev`
2. Проверьте порт: обычно `http://localhost:3000`
3. Проверьте консоль браузера (F12) на наличие ошибок
4. Проверьте логи сервера на наличие ошибок компиляции

## Тестирование отправки писем

После настройки переменных и перезапуска сервера:

1. Откройте `http://localhost:3000/api/test-smtp` - должен вернуть JSON с результатом
2. Отправьте тестовую форму на странице контактов
3. Проверьте логи сервера для детальной информации
