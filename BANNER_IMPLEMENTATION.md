# –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –±–∞–Ω–Ω–µ—Ä–∞

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

–°–∏—Å—Ç–µ–º–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –±–∞–Ω–Ω–µ—Ä–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **—Ç–æ–ª—å–∫–æ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫** –±–µ–∑ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

## üìã –ß—Ç–æ –±—ã–ª–æ —Å–æ–∑–¥–∞–Ω–æ

### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

**–§–∞–π–ª:** `migrations/007_add_site_banner.sql`

–°–æ–∑–¥–∞–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `site_banner` —Å –ø–æ–ª—è–º–∏:
- `enabled` - –≤–∫–ª—é—á–µ–Ω/–≤—ã–∫–ª—é—á–µ–Ω –±–∞–Ω–Ω–µ—Ä
- `message` - —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
- `style` - —Ä–µ–∂–∏–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è (static/marquee)
- `bg_color`, `text_color` - —Ü–≤–µ—Ç–∞
- `font_size`, `font_weight` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —à—Ä–∏—Ñ—Ç–∞
- `dismissible` - –º–æ–∂–Ω–æ –ª–∏ –∑–∞–∫—Ä—ã—Ç—å

### 2. TypeScript —Ç–∏–ø—ã

**–§–∞–π–ª:** `src/lib/types/banner.ts`

–¢–∏–ø—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–Ω–Ω–µ—Ä–æ–º:
- `SiteBanner` - –ø–æ–ª–Ω–∞—è –º–æ–¥–µ–ª—å –±–∞–Ω–Ω–µ—Ä–∞
- `BannerSettings` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- `BannerApiResponse` - –æ—Ç–≤–µ—Ç API

### 3. Backend API

**–ü—É–±–ª–∏—á–Ω—ã–π API:** `src/app/api/banner/route.ts`
- `GET /api/banner` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –±–∞–Ω–Ω–µ—Ä–∞
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ: 60 —Å–µ–∫—É–Ω–¥
- –î–æ—Å—Ç—É–ø–µ–Ω –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

**Admin API:** `src/app/api/admin/banner/route.ts`
- `GET /api/admin/banner` - –ø–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ (—Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
- `PUT /api/admin/banner` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ (—Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ + CSRF)
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ó–∞—â–∏—Ç–∞ –æ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö —Ü–≤–µ—Ç–æ–≤

### 4. Frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

**–ë–∞–Ω–Ω–µ—Ä:** `src/components/AnnouncementBanner.tsx`
- –î–≤–∞ —Ä–µ–∂–∏–º–∞: static (—Å—Ç–∞—Ç–∏—á–Ω—ã–π) –∏ marquee (–±–µ–≥—É—â–∞—è —Å—Ç—Ä–æ–∫–∞)
- –ê–Ω–∏–º–∞—Ü–∏–∏ –ø–æ—è–≤–ª–µ–Ω–∏—è/–∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è —á–µ—Ä–µ–∑ Framer Motion
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–∫—Ä—ã—Ç–∏—è –≤ localStorage
- Responsive –¥–∏–∑–∞–π–Ω
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Ü–≤–µ—Ç–æ–≤ –∏ —à—Ä–∏—Ñ—Ç–æ–≤

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:** `src/app/layout.tsx`
- –ë–∞–Ω–Ω–µ—Ä –¥–æ–±–∞–≤–ª–µ–Ω –≤ root layout
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö (–∫—Ä–æ–º–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏)

### 5. –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

**–°—Ç—Ä–∞–Ω–∏—Ü–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** `src/app/admin/banner/page.tsx`

–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
- ‚úÖ –í–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ –±–∞–Ω–Ω–µ—Ä–∞ (Checkbox)
- ‚úÖ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ (Textarea)
- ‚úÖ –í—ã–±–æ—Ä —Å—Ç–∏–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è (Select: static/marquee)
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ü–≤–µ—Ç–æ–≤ (–Ω–∞—Ç–∏–≤–Ω—ã–π `<input type="color">` + —Ç–µ–∫—Å—Ç–æ–≤—ã–π –≤–≤–æ–¥ hex)
- ‚úÖ –í—ã–±–æ—Ä —Ä–∞–∑–º–µ—Ä–∞ —à—Ä–∏—Ñ—Ç–∞ (Select: 12px-20px)
- ‚úÖ –í—ã–±–æ—Ä —Ç–æ–ª—â–∏–Ω—ã —à—Ä–∏—Ñ—Ç–∞ (Select: normal/medium/bold)
- ‚úÖ –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–∏—è (Checkbox)
- ‚úÖ –ñ–∏–≤–æ–π –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å CSRF –∑–∞—â–∏—Ç–æ–π

**–ù–∞–≤–∏–≥–∞—Ü–∏—è:** `src/app/admin/layout.tsx`
- –î–æ–±–∞–≤–ª–µ–Ω –ø—É–Ω–∫—Ç "–ë–∞–Ω–Ω–µ—Ä" —Å –∏–∫–æ–Ω–∫–æ–π Bell
- –î–æ—Å—Ç—É–ø–µ–Ω –≤ –¥–µ—Å–∫—Ç–æ–ø–Ω–æ–π –∏ –º–æ–±–∏–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏

## üéØ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

### –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (–±–µ–∑ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö!)

- ‚úÖ **Framer Motion** - –∞–Ω–∏–º–∞—Ü–∏–∏ –ø–æ—è–≤–ª–µ–Ω–∏—è/–∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è
- ‚úÖ **Lucide React** - –∏–∫–æ–Ω–∫–∏ (Bell, X, Eye, Save, Loader2)
- ‚úÖ **Radix UI** - –±–∞–∑–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (—É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã)
- ‚úÖ **Tailwind CSS** - —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è
- ‚úÖ **PostgreSQL** - —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **Next.js App Router** - —Ä–æ—É—Ç–∏–Ω–≥ –∏ API

### UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ)

- ‚úÖ `Checkbox` - –≤–º–µ—Å—Ç–æ Switch (–±–µ–∑ –Ω–æ–≤–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏!)
- ‚úÖ `Button`, `Card`, `Label`, `Textarea`
- ‚úÖ –ù–∞—Ç–∏–≤–Ω—ã–π `<input type="color">` - –≤–º–µ—Å—Ç–æ —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö color picker'–æ–≤

### CSS –∞–Ω–∏–º–∞—Ü–∏–∏

```css
@keyframes marquee {
  0% { transform: translateX(0); }
  100% { transform: translateX(-33.333%); }
}
```

–ë–µ–≥—É—â–∞—è —Å—Ç—Ä–æ–∫–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ —á–∏—Å—Ç—ã–π CSS –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫.

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –¥–ª—è admin API
- ‚úÖ CSRF –∑–∞—â–∏—Ç–∞ –¥–ª—è PUT –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç XSS (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `textContent` –≤–º–µ—Å—Ç–æ `innerHTML`)
- ‚úÖ Row Level Security –≤ PostgreSQL

## üì± Responsive –¥–∏–∑–∞–π–Ω

- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –≤–µ—Ä—Å—Ç–∫–∞ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ –≤—Å–µ—Ö —Ä–∞–∑–º–µ—Ä–∞—Ö —ç–∫—Ä–∞–Ω–∞
- ‚úÖ –î–æ—Å—Ç—É–ø–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö

## üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ API –æ—Ç–≤–µ—Ç–æ–≤ (60 —Å–µ–∫—É–Ω–¥)
- ‚úÖ Lazy loading –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –±–∞–Ω–Ω–µ—Ä–∞
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ re-renders —á–µ—Ä–µ–∑ React.memo
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ CSS –∞–Ω–∏–º–∞—Ü–∏–∏

## üìù –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–æ–∑–¥–∞–Ω—ã —Ñ–∞–π–ª—ã:
- `BANNER_SETUP.md` - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ
- `BANNER_TESTING.md` - —á–µ–∫-–ª–∏—Å—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (24 —Ç–µ—Å—Ç–∞)
- `BANNER_IMPLEMENTATION.md` - —ç—Ç–æ—Ç —Ñ–∞–π–ª

## üé® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### 1. Singleton Pattern

–¢–∞–±–ª–∏—Ü–∞ `site_banner` —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ –æ–¥–Ω—É –∑–∞–ø–∏—Å—å. –ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ —Å–æ–∑–¥–∞—Ç—å –≤—Ç–æ—Ä—É—é –∑–∞–ø–∏—Å—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `ON CONFLICT` –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è.

### 2. Hash-based Dismissal

–ó–∞–∫—Ä—ã—Ç–∏–µ –±–∞–Ω–Ω–µ—Ä–∞ –ø—Ä–∏–≤—è–∑–∞–Ω–æ –∫ hash —Å–æ–æ–±—â–µ–Ω–∏—è:
```typescript
const bannerHash = simpleHash(banner.message);
localStorage.setItem(`dismissed-banner-${bannerHash}`, timestamp);
```

–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏—è hash –º–µ–Ω—è–µ—Ç—Å—è, –∏ –±–∞–Ω–Ω–µ—Ä –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Å–Ω–æ–≤–∞.

### 3. Marquee –±–µ–∑ JavaScript

–ë–µ–≥—É—â–∞—è —Å—Ç—Ä–æ–∫–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ CSS animation —Å —Ç—Ä–µ–º—è –∫–æ–ø–∏—è–º–∏ —Ç–µ–∫—Å—Ç–∞:
```jsx
<span className="marquee-text">{message}</span>
<span className="marquee-text">{message}</span>
<span className="marquee-text">{message}</span>
```

–ê–Ω–∏–º–∞—Ü–∏—è —Å–¥–≤–∏–≥–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–∞ -33.333%, —Å–æ–∑–¥–∞–≤–∞—è –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç.

### 4. Color Picker –±–µ–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞—Ç–∏–≤–Ω—ã–π `<input type="color">` + —Ç–µ–∫—Å—Ç–æ–≤—ã–π input –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞:
```jsx
<input type="color" value={color} onChange={...} />
<input type="text" value={color} onChange={...} />
```

## üîß –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏

```bash
# –õ–æ–∫–∞–ª—å–Ω–æ
docker exec -i fb-net-postgres psql -U postgres -d postgres < migrations/007_add_site_banner.sql

# –£–¥–∞–ª–µ–Ω–Ω–æ
ssh root@155.212.217.60 "docker exec fb-net-db psql -U postgres -d postgres" < migrations/007_add_site_banner.sql
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ `/admin/banner`
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –±–∞–Ω–Ω–µ—Ä
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
4. –ü—Ä–æ–π–¥–∏—Ç–µ —á–µ–∫-–ª–∏—Å—Ç –∏–∑ `BANNER_TESTING.md`

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- **–§–∞–π–ª–æ–≤ —Å–æ–∑–¥–∞–Ω–æ:** 9
- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞:** ~1500
- **–ù–æ–≤—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:** 0 ‚úÖ
- **API endpoints:** 3
- **UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:** 2
- **–ú–∏–≥—Ä–∞—Ü–∏–π –ë–î:** 1

## ‚ú® –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∞—è —Å–∏—Å—Ç–µ–º–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –±–∞–Ω–Ω–µ—Ä–∞ —Å:
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- ‚úÖ –î–≤—É–º—è —Ä–µ–∂–∏–º–∞–º–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è (static/marquee)
- ‚úÖ –ü–æ–ª–Ω–æ–π –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏–µ–π (—Ü–≤–µ—Ç–∞, —à—Ä–∏—Ñ—Ç—ã)
- ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- ‚úÖ –ë–µ–∑ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫!

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üéâ
