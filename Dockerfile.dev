# Development Dockerfile with Bun
FROM oven/bun:1-slim

WORKDIR /app

# Install dependencies with Bun
COPY package.json bun.lockb* ./

# Install dependencies with Bun (much faster than traditional installers)
RUN bun install

# Verify critical dependencies are installed
RUN bun pm ls axios || (echo "ERROR: axios not installed" && exit 1)

# Display installed packages for debugging
RUN echo "=== Installed packages ===" && bun pm ls | grep -E "(axios|node-telegram|pg)" || true

# Copy app files
COPY . .

# Expose Next.js port
EXPOSE 3000

# Set environment variables for Next.js
ENV NODE_ENV=development
ENV PORT=3000
ENV HOSTNAME=0.0.0.0

# Start Next.js dev server with Bun
CMD ["bun", "run", "dev"]

